{"version":3,"file":"static/js/79.72e39824.chunk.js","mappings":"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","sources":["webpack://presentator/./src/pages/Auth/Login/Login.module.scss?93c4","pages/Auth/Login/utils.ts","pages/Auth/Login/Login.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Login_container__3oQSR\",\"errorText\":\"Login_errorText__0iesa\",\"errorTextSizeBlock\":\"Login_errorTextSizeBlock__eCXRg\",\"prefix\":\"Login_prefix__prfGX\",\"inputWithPrefix\":\"Login_inputWithPrefix__zDJap\",\"opacityBox\":\"Login_opacityBox__ZbShq\",\"registerInput\":\"Login_registerInput__tfIdr\",\"content\":\"Login_content__gLjGZ\",\"form\":\"Login_form__lyNe0\",\"formContainer\":\"Login_formContainer__Hw+OC\",\"title\":\"Login_title__58Nkx\",\"subtitle\":\"Login_subtitle__tCDQw\",\"subtitleLabel\":\"Login_subtitleLabel__gcyEw\",\"subtitleLink\":\"Login_subtitleLink__PtzC8\",\"formFooter\":\"Login_formFooter__DYHEX\",\"headerContainer\":\"Login_headerContainer__u0RE0\",\"label\":\"Login_label__daOvH\",\"loginInput\":\"Login_loginInput__VbLAq\",\"buttonContainer\":\"Login_buttonContainer__rAnt9\",\"forgot\":\"Login_forgot__7NU1p\",\"restore\":\"Login_restore__wA5jJ\",\"inputError\":\"Login_inputError__xh4qA\",\"labelError\":\"Login_labelError__bJO15\",\"logoContainer\":\"Login_logoContainer__AcWo7\"};","import * as yup from 'yup';\r\n\r\nexport const validationSchema = yup.object({\r\n\tlogin: yup\r\n\t\t.string()\r\n\t\t.required('Login is required'),\r\n\tpassword: yup\r\n\t\t.string()\r\n\t\t.required('Password is required'),\r\n})","import { FC, useState } from 'react'\r\nimport styles from './Login.module.scss'\r\nimport axios from 'axios';\r\nimport { Field, Form, Formik } from 'formik'\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport cn from \"classnames\"\r\nimport { validationSchema } from './utils';\r\nimport Header from '../../../components/Header';\r\nimport Logo from '../../../components/Logo';\r\nimport InputMask from 'react-input-mask';\r\n\r\nconst Login: FC = () => {\r\n\tconst navigate = useNavigate()\r\n\tconst role = window.localStorage.getItem('role')\r\n\tconst [showErrorText, setShowErrorText] = useState(false);\r\n\r\n\treturn (\r\n\t\t<main className={styles.container}>\r\n\t\t\t<div className={styles.opacityBox}>\r\n\t\t\t\t<div className={styles.headerContainer}>\r\n\t\t\t\t\t<Header role={role}/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={styles.content}>\r\n\t\t\t\t\t<div className={styles.logoContainer}>\r\n\t\t\t\t\t\t<Logo/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Formik \r\n\t\t\t\t\t\tvalidationSchema={validationSchema}\r\n\t\t\t\t\t\tinitialValues={{\r\n\t\t\t\t\t\t\tlogin:'',\r\n\t\t\t\t\t\t\tpassword: ''\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tonSubmit={async (values, { resetForm }) => {\r\n\t\t\t\t\t\t\tconst phoneNumber = values.login;\r\n\t\t\t\t\t\t\tconst password = values.password;\r\n\t\t\t\t\t\t\tconst cleanedPhoneNumber = values.login.replace(/\\D/g, '');\r\n\t\t\t\t\t\t\tconst encodedPhoneNumber = encodeURIComponent(cleanedPhoneNumber);\r\n\t\t\t\t\t\t\tconst encodedPassword = encodeURIComponent(password);\r\n\t\t\t\t\t\t\tconst url = `https://презентатор.рф/api/check_credentials/?phone_number=${encodedPhoneNumber}&password=${encodedPassword}`;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tconst response = await axios.post(url);\r\n\t\t\t\t\t\t\t\tif (response.data.status === \"success\") {\r\n\t\t\t\t\t\t\t\t\twindow.localStorage.setItem(\"role\", \"user\");\r\n\t\t\t\t\t\t\t\t\twindow.localStorage.setItem(\"isAuth\", \"true\");\r\n\t\t\t\t\t\t\t\t\twindow.localStorage.setItem('login', phoneNumber); \r\n\t\t\t\t\t\t\t\t\tnavigate(\"/user/homepage\");\r\n\t\t\t\t\t\t\t\t\tresetForm();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsetShowErrorText(true); // Показываем текст ошибки\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} catch(error) {\r\n\t\t\t\t\t\t\t\tsetShowErrorText(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{({ errors, touched }) => (\r\n\t\t\t\t\t\t\t<Form className={styles.form}>\r\n\t\t\t\t\t\t\t\t<div className={styles.formContainer}>\r\n\t\t\t\t\t\t\t\t\t<div className={styles.title}>Вход</div>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<div className={styles.subtitle}>\r\n                    <span className={styles.subtitleLabel}>Еще нет аккаунта?</span>\r\n                    <span \r\n                      className={styles.subtitleLink}\r\n                      onClick={() => navigate('/registration')}\r\n                    >\r\n                      Зарегистрироваться\r\n                    </span>\r\n                  </div>\r\n\t\t\t\t  <label className={cn(styles.label, {[styles.labelError]: errors.login && touched.login})}>\r\n\t\t\t\t\t\t\t\t\t\tНомер телефона привязанный к Telegram\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t<div className={styles.inputWithPrefix}>\r\n\t\t\t\t\t\t\t\t\t\t<div className={styles.prefix}>+7</div>\r\n\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"login\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"(999) 999-99-99\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={cn(styles.registerInput, {[styles.inputError]: errors.login && touched.login})}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{({ field }: { field: any }) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<InputMask\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmask=\"(999) 999-99-99\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"(999) 999-99-99\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(inputProps: any) => <input {...inputProps} className={styles.registerInput} />}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</InputMask>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Field>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<label className={cn(styles.label, {[styles.labelError]: errors.password && touched.password})}>\r\n\t\t\t\t\t\t\t\t\t\tПароль\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t<Field \r\n\t\t\t\t\t\t\t\t\t\tname='password' \r\n\t\t\t\t\t\t\t\t\t\ttype='password' \r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Пароль' \r\n\t\t\t\t\t\t\t\t\t\tclassName={cn(styles.loginInput, {[styles.inputError]: errors.password && touched.password})}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t{showErrorText ? (\r\n\t\t\t\t\t\t\t\t\t\t<span className={styles.errorText}>Неверный пароль</span>\r\n\t\t\t\t\t\t\t\t\t) : <div className={styles.errorTextSizeBlock}></div>}\r\n\t\t\t\t\t\t\t\t\t<div className={styles.buttonContainer}>\r\n\t\t\t\t\t\t\t\t\t\t<button type='submit'>Войти</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<span className={styles.forgot}>\r\n\t\t\t\t\t\t\t\t\t\t<a href=\"https://t.me/presentator_helper_bot\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.subtitleLink}>Забыли пароль?</a>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Formik>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</main>\r\n\t);\r\n};\r\n\r\nexport default Login;"],"names":["validationSchema","yup","login","required","password","Login","navigate","useNavigate","role","window","localStorage","getItem","showErrorText","setShowErrorText","useState","_jsx","className","styles","children","_jsxs","Header","Logo","Formik","initialValues","onSubmit","async","values","_ref","resetForm","phoneNumber","cleanedPhoneNumber","replace","encodedPhoneNumber","encodeURIComponent","encodedPassword","url","concat","axios","data","status","setItem","error","_ref2","errors","touched","Form","onClick","cn","Field","name","placeholder","_ref3","field","InputMask","mask","inputProps","type","href","target","rel"],"sourceRoot":""}