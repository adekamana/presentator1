{"version":3,"file":"static/js/79.8b48c202.chunk.js","mappings":"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","sources":["webpack://presentator/./src/pages/Auth/Login/Login.module.scss?93c4","pages/Auth/Login/utils.ts","pages/Auth/Login/Login.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Login_container__px8+m\",\"errorText\":\"Login_errorText__FfMIB\",\"prefix\":\"Login_prefix__lMtla\",\"inputWithPrefix\":\"Login_inputWithPrefix__wk929\",\"opacityBox\":\"Login_opacityBox__IR3W6\",\"registerInput\":\"Login_registerInput__sJJnM\",\"content\":\"Login_content__hpesU\",\"form\":\"Login_form__BPV8L\",\"formContainer\":\"Login_formContainer__XCXAd\",\"title\":\"Login_title__+aJDi\",\"subtitle\":\"Login_subtitle__bFSKj\",\"subtitleLabel\":\"Login_subtitleLabel__+lJLA\",\"subtitleLink\":\"Login_subtitleLink__KGRkA\",\"formFooter\":\"Login_formFooter__iAwlr\",\"headerContainer\":\"Login_headerContainer__vy3EI\",\"label\":\"Login_label__X+Y62\",\"loginInput\":\"Login_loginInput__VaT1s\",\"buttonContainer\":\"Login_buttonContainer__Hya0u\",\"forgot\":\"Login_forgot__6ifHt\",\"restore\":\"Login_restore__RzA3z\",\"inputError\":\"Login_inputError__+vXVf\",\"labelError\":\"Login_labelError__fidrb\",\"logoContainer\":\"Login_logoContainer__vfCsa\"};","import * as yup from 'yup';\n\nexport const validationSchema = yup.object({\n\tlogin: yup\n\t\t.string()\n\t\t.required('Login is required'),\n\tpassword: yup\n\t\t.string()\n\t\t.required('Password is required'),\n})","import { FC, useState } from 'react'\nimport styles from './Login.module.scss'\nimport axios from 'axios';\nimport { Field, Form, Formik } from 'formik'\nimport { useNavigate } from \"react-router-dom\";\nimport cn from \"classnames\"\nimport { validationSchema } from './utils';\nimport Header from '../../../components/Header';\nimport Logo from '../../../components/Logo';\nimport InputMask from 'react-input-mask';\n\nconst Login: FC = () => {\n\tconst navigate = useNavigate()\n\tconst role = window.localStorage.getItem('role')\n\tconst [showErrorText, setShowErrorText] = useState(false);\n\n\treturn (\n\t\t<main className={styles.container}>\n\t\t\t<div className={styles.opacityBox}>\n\t\t\t\t<div className={styles.headerContainer}>\n\t\t\t\t\t<Header role={role}/>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.content}>\n\t\t\t\t\t<div className={styles.logoContainer}>\n\t\t\t\t\t\t<Logo/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Formik \n\t\t\t\t\t\tvalidationSchema={validationSchema}\n\t\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\t\tlogin:'',\n\t\t\t\t\t\t\tpassword: ''\n\t\t\t\t\t\t}}\n\t\t\t\t\t\n\t\t\t\t\t\tonSubmit={async (values, { resetForm }) => {\n\t\t\t\t\t\t\tconst phoneNumber = values.login;\n\t\t\t\t\t\t\tconst password = values.password;\n\t\t\t\t\t\t\tconst cleanedPhoneNumber = values.login.replace(/\\D/g, '');\n\t\t\t\t\t\t\tconst encodedPhoneNumber = encodeURIComponent(cleanedPhoneNumber);\n\t\t\t\t\t\t\tconst encodedPassword = encodeURIComponent(password);\n\t\t\t\t\t\t\tconst url = `https://презентатор.рф/api/check_credentials/?phone_number=${encodedPhoneNumber}&password=${encodedPassword}`;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst response = await axios.post(url);\n\t\t\t\t\t\t\t\tif (response.data.status === \"success\") {\n\t\t\t\t\t\t\t\t\twindow.localStorage.setItem(\"role\", \"user\");\n\t\t\t\t\t\t\t\t\twindow.localStorage.setItem(\"isAuth\", \"true\");\n\t\t\t\t\t\t\t\t\twindow.localStorage.setItem('login', phoneNumber); \n\t\t\t\t\t\t\t\t\tnavigate(\"/user/homepage\");\n\t\t\t\t\t\t\t\t\tresetForm();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetShowErrorText(true); // Показываем текст ошибки\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch(error) {\n\t\t\t\t\t\t\t\tsetShowErrorText(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{({ errors, touched }) => (\n\t\t\t\t\t\t\t<Form className={styles.form}>\n\t\t\t\t\t\t\t\t<div className={styles.formContainer}>\n\t\t\t\t\t\t\t\t\t<div className={styles.title}>Вход</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div className={styles.subtitle}>\n                    <span className={styles.subtitleLabel}>Еще нет аккаунта?</span>\n                    <span \n                      className={styles.subtitleLink}\n                      onClick={() => navigate('/registration')}\n                    >\n                      Зарегистрироваться\n                    </span>\n                  </div>\n\t\t\t\t  <label className={cn(styles.label, {[styles.labelError]: errors.login && touched.login})}>\n\t\t\t\t\t\t\t\t\t\tНомер телефона привязанный к Telegram\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<div className={styles.inputWithPrefix}>\n\t\t\t\t\t\t\t\t\t\t<div className={styles.prefix}>+7</div>\n\t\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\t\tname=\"login\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"(999) 999-99-99\"\n\t\t\t\t\t\t\t\t\t\t\tclassName={cn(styles.registerInput, {[styles.inputError]: errors.login && touched.login})}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{({ field }: { field: any }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<InputMask\n\t\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmask=\"(999) 999-99-99\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(inputProps: any) => <input {...inputProps} className={styles.registerInput} />}\n\t\t\t\t\t\t\t\t\t\t\t\t</InputMask>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<label className={cn(styles.label, {[styles.labelError]: errors.password && touched.password})}>\n\t\t\t\t\t\t\t\t\t\tПароль\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<Field \n\t\t\t\t\t\t\t\t\t\tname='password' \n\t\t\t\t\t\t\t\t\t\ttype='password' \n\t\t\t\t\t\t\t\t\t\tplaceholder='Пароль' \n\t\t\t\t\t\t\t\t\t\tclassName={cn(styles.loginInput, {[styles.inputError]: errors.password && touched.password})}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{showErrorText && (\n\t\t\t\t\t\t\t\t\t\t<p className={styles.errorText}>Неверный пароль</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<div className={styles.buttonContainer}>\n\t\t\t\t\t\t\t\t\t\t<button type='submit'>Войти</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span className={styles.forgot}>\n\t\t\t\t\t\t\t\t\t\t<a href=\"https://t.me/presentator_helper_bot\" target=\"_blank\" rel=\"noopener noreferrer\">Забыли пароль?</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Formik>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</main>\n\t);\n};\n\nexport default Login;"],"names":["validationSchema","yup","login","required","password","Login","navigate","useNavigate","role","window","localStorage","getItem","showErrorText","setShowErrorText","useState","_jsx","className","styles","children","_jsxs","Header","Logo","Formik","initialValues","onSubmit","async","values","_ref","resetForm","phoneNumber","cleanedPhoneNumber","replace","encodedPhoneNumber","encodeURIComponent","encodedPassword","url","concat","axios","post","data","status","setItem","error","_ref2","errors","touched","Form","onClick","cn","Field","name","placeholder","_ref3","field","InputMask","mask","inputProps","type","href","target","rel"],"sourceRoot":""}